{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}

<div class="container">
    <h1 class="title mt-5 mb-3">Destination {{destination.location}}</h1>
    <div class="card mb-3">
      <div class="card-body">
          <div class="h4"> Holiday : <a href="{% url 'holiday-detail' holiday.id %}">{{ destination.holiday }}</a></div>
          <div>Location : {{ destination.location }}</div>
          <div>Start Date : {{ destination.start_date }}</div>
          <div>End Date : {{ destination.end_date }}</div>
          <div>Description : {{ destination.description }}</div>
      </div>
    </div>
  <div class="h1">Itinerary Lists</div>
  <div>
  {% if destination.itinerary_set.count %}
  <table class="table mt-3">
  <thead>
  <tr>
    <th>Itinerary</th>
    <th>Accommodation</th>
    <th>Type</th>
    <tr>
  </thead>
  <tbody>
    {% for itinerary in destination.itinerary_set.all %}
    <tr>
      <td>
      <a href="{% url 'itinerary-detail' destination.id itinerary.id %}">
      {{ itinerary.description }}</a>
      </td>
      {% if itinerary.accommodation %}
      <td>{{itinerary.accommodation.accom_name}}</td>
      <td>{{itinerary.accommodation.accom_type}}</td>
      {% else %}
      <a class='btn btn-custom1' href="{% url 'accom-create' destination.id itinerary.id %}">Add Accommodation</a>
      {% endif %}
      </tr>
    </div>
    {% endfor %}
    </tbody>
  </table>
  {% else %}
    <div>{{destination.location}} still do not have any itinerary available</div>
  {% endif %}
    <a class='btn btn-custom1 mt-3' href="{% url 'itinerary_create' destination.id%}">Create Itinerary</a>
  </div>
  {% endblock %}